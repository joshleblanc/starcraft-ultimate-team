<%= link_to "â† Back to Match", @match, class: "text-cyan-400 hover:text-cyan-300 mb-4 inline-block" %>

<div class="max-w-4xl mx-auto">
  <div class="text-center mb-8">
    <div class="text-sm text-gray-500 mb-2">Game <%= @game.game_number %></div>
    <h1 class="text-3xl font-bold text-white">
      <%= @game.home_player.name %> vs <%= @game.away_player.name %>
    </h1>
  </div>

  <!-- Players -->
  <div class="grid grid-cols-2 gap-8 mb-8">
    <div class="text-center <%= @game.winner_player == @game.home_player ? 'ring-2 ring-green-500 rounded-xl' : '' %>">
      <div class="rounded-xl bg-gray-800 border border-gray-700 p-6">
        <div class="text-4xl mb-2"><%= @game.home_player.race_icon %></div>
        <div class="text-xl font-bold text-white"><%= @game.home_player.name %></div>
        <div class="text-gray-400"><%= @game.home_player.card.race %></div>
        <div class="mt-4 text-3xl font-bold" style="color: <%= @game.home_player.rarity_color %>">
          <%= @game.home_player.overall_rating %>
        </div>
        <% if @game.winner_player == @game.home_player %>
          <div class="mt-2 text-green-400 font-semibold">ğŸ† Winner</div>
        <% end %>
      </div>
    </div>
    
    <div class="text-center <%= @game.winner_player == @game.away_player ? 'ring-2 ring-green-500 rounded-xl' : '' %>">
      <div class="rounded-xl bg-gray-800 border border-gray-700 p-6">
        <div class="text-4xl mb-2"><%= @game.away_player.race_icon %></div>
        <div class="text-xl font-bold text-white"><%= @game.away_player.name %></div>
        <div class="text-gray-400"><%= @game.away_player.card.race %></div>
        <div class="mt-4 text-3xl font-bold" style="color: <%= @game.away_player.rarity_color %>">
          <%= @game.away_player.overall_rating %>
        </div>
        <% if @game.winner_player == @game.away_player %>
          <div class="mt-2 text-green-400 font-semibold">ğŸ† Winner</div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Phase Results -->
  <% if @game.completed? %>
    <div class="rounded-xl bg-gray-800 border border-gray-700 p-6 mb-8">
      <h2 class="font-semibold text-white mb-4 text-center">Game Phases</h2>
      <div class="grid grid-cols-3 gap-4">
        <% %w[early mid late].each do |phase| %>
          <% result = @game.send("#{phase}_game_result") %>
          <div class="text-center p-4 rounded-lg <%= @game.deciding_phase == phase ? 'bg-yellow-500/20 ring-2 ring-yellow-500' : 'bg-gray-700/50' %>">
            <div class="text-lg font-semibold text-white capitalize mb-2"><%= phase %> Game</div>
            <div class="text-2xl <%= result == 'home' ? 'text-blue-400' : result == 'away' ? 'text-red-400' : 'text-gray-400' %>">
              <%= result == 'even' ? 'âš–ï¸ Even' : result == 'home' ? 'â¬…ï¸ Home' : 'Away â¡ï¸' %>
            </div>
            <% if @game.deciding_phase == phase %>
              <div class="mt-2 text-xs text-yellow-400">Deciding phase</div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Simulation Log -->
    <% if @game.simulation_log.present? %>
      <div class="rounded-xl bg-gray-800 border border-gray-700 p-6">
        <h2 class="font-semibold text-white mb-4">ğŸ“œ Game Log</h2>
        <div class="space-y-2 font-mono text-sm">
          <% @game.simulation_log.each do |entry| %>
            <div class="text-gray-300"><%= entry["message"] %></div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="text-center text-gray-500">Game not yet played</div>
  <% end %>
</div>
